2024-08-05 09:25:48.996 +05:00 [INF] Migrations applying...
2024-08-05 09:32:06.157 +05:00 [INF] Migrations applying...
2024-08-05 09:32:31.117 +05:00 [INF] Migrations applying...
2024-08-05 09:32:55.050 +05:00 [INF] Migrations applying...
2024-08-05 09:33:08.305 +05:00 [INF] Migrations applying...
2024-08-05 09:33:09.163 +05:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "MyWords";
2024-08-05 09:33:09.273 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2024-08-05 09:33:09.306 +05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 09:33:09.311 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-08-05 09:33:09.322 +05:00 [INF] No migrations were applied. The database is already up to date.
2024-08-05 09:33:09.323 +05:00 [INF] Migrations applied.
2024-08-05 09:33:09.332 +05:00 [INF] Permissions synchronization starting....
2024-08-05 09:33:09.501 +05:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 09:33:09.514 +05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'DatabaseBroker.DataContext.ProgramDataContext'.
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.permissions" не существует

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.permissions" не существует
    Position: 48
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.permissions" не существует

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.permissions" не существует
    Position: 48
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
2024-08-05 09:33:09.522 +05:00 [ERR] Permissions synchronization crashed.
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.permissions" не существует

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebCore.Extensions.ConfigureApplication.SynchronizePermissions(WebApplication app) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Extensions\ConfigureApplication.cs:line 185
   at WebCore.Extensions.ConfigureApplication.SynchronizePermissions(WebApplication app) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Extensions\ConfigureApplication.cs:line 210
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.permissions" не существует
    Position: 48
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
2024-08-05 09:33:09.588 +05:00 [INF] User profile is available. Using 'C:\Users\z_zayniddinov\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-05 09:33:09.630 +05:00 [INF] Now listening on: http://[::]:1001
2024-08-05 09:33:09.632 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-05 09:33:09.633 +05:00 [INF] Hosting environment: Development
2024-08-05 09:33:09.634 +05:00 [INF] Content root path: C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi
2024-08-05 09:33:28.043 +05:00 [INF] Application is shutting down...
2024-08-05 11:25:43.365 +05:00 [INF] Migrations applying...
2024-08-05 11:25:44.162 +05:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 11:25:44.192 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 11:25:44.206 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-08-05 11:25:44.217 +05:00 [INF] No migrations were applied. The database is already up to date.
2024-08-05 11:25:44.217 +05:00 [INF] Migrations applied.
2024-08-05 11:25:44.226 +05:00 [INF] Permissions synchronization starting....
2024-08-05 11:25:44.415 +05:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:25:44.428 +05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'DatabaseBroker.DataContext.ProgramDataContext'.
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.permissions" не существует

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.permissions" не существует
    Position: 48
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.permissions" не существует

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.permissions" не существует
    Position: 48
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
2024-08-05 11:25:44.433 +05:00 [ERR] Permissions synchronization crashed.
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.permissions" не существует

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebCore.Extensions.ConfigureApplication.SynchronizePermissionsAsync(WebApplication app) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Extensions\ConfigureApplication.cs:line 188
   at WebCore.Extensions.ConfigureApplication.SynchronizePermissionsAsync(WebApplication app) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Extensions\ConfigureApplication.cs:line 213
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.permissions" не существует
    Position: 48
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
2024-08-05 11:25:44.441 +05:00 [INF] Init sid data starting....
2024-08-05 11:25:44.457 +05:00 [ERR] Failed executing DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE NOT (s.is_delete) AND s.is_default
LIMIT 1
2024-08-05 11:25:44.458 +05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'DatabaseBroker.DataContext.ProgramDataContext'.
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.structures" не существует

POSITION: 82
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.structures" не существует
    Position: 82
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.structures" не существует

POSITION: 82
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.structures" не существует
    Position: 82
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
2024-08-05 11:25:44.462 +05:00 [ERR] Init sid data crashed.
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.structures" не существует

POSITION: 82
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebCore.Extensions.ConfigureApplication.InitSidDataAsync(WebApplication app) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Extensions\ConfigureApplication.cs:line 233
   at WebCore.Extensions.ConfigureApplication.InitSidDataAsync(WebApplication app) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Extensions\ConfigureApplication.cs:line 329
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.structures" не существует
    Position: 82
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
2024-08-05 11:25:44.514 +05:00 [INF] User profile is available. Using 'C:\Users\z_zayniddinov\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-05 11:25:44.549 +05:00 [INF] Now listening on: http://[::]:1001
2024-08-05 11:25:44.550 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-05 11:25:44.550 +05:00 [INF] Hosting environment: Development
2024-08-05 11:25:44.551 +05:00 [INF] Content root path: C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi
2024-08-05 11:25:55.486 +05:00 [INF] Application is shutting down...
2024-08-05 11:42:59.969 +05:00 [INF] Migrations applying...
2024-08-05 11:43:00.801 +05:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 11:43:00.830 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 11:43:00.843 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-08-05 11:43:00.854 +05:00 [INF] No migrations were applied. The database is already up to date.
2024-08-05 11:43:00.854 +05:00 [INF] Migrations applied.
2024-08-05 11:43:00.861 +05:00 [INF] Permissions synchronization starting....
2024-08-05 11:43:01.031 +05:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:43:01.044 +05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'DatabaseBroker.DataContext.ProgramDataContext'.
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.permissions" не существует

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.permissions" не существует
    Position: 48
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.permissions" не существует

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.permissions" не существует
    Position: 48
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
2024-08-05 11:43:01.050 +05:00 [ERR] Permissions synchronization crashed.
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.permissions" не существует

POSITION: 48
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebCore.Extensions.ConfigureApplication.SynchronizePermissionsAsync(WebApplication app) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Extensions\ConfigureApplication.cs:line 190
   at WebCore.Extensions.ConfigureApplication.SynchronizePermissionsAsync(WebApplication app) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Extensions\ConfigureApplication.cs:line 215
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.permissions" не существует
    Position: 48
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
2024-08-05 11:43:01.058 +05:00 [INF] Init sid data starting....
2024-08-05 11:43:01.073 +05:00 [ERR] Failed executing DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE NOT (s.is_delete) AND s.is_default
LIMIT 1
2024-08-05 11:43:01.075 +05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'DatabaseBroker.DataContext.ProgramDataContext'.
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.structures" не существует

POSITION: 82
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.structures" не существует
    Position: 82
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.structures" не существует

POSITION: 82
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.structures" не существует
    Position: 82
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
2024-08-05 11:43:01.079 +05:00 [ERR] Init sid data crashed.
Npgsql.PostgresException (0x80004005): 42P01: отношение "auth.structures" не существует

POSITION: 82
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebCore.Extensions.ConfigureApplication.InitSidDataAsync(WebApplication app) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Extensions\ConfigureApplication.cs:line 235
   at WebCore.Extensions.ConfigureApplication.InitSidDataAsync(WebApplication app) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Extensions\ConfigureApplication.cs:line 331
  Exception data:
    Severity: ОШИБКА
    SqlState: 42P01
    MessageText: отношение "auth.structures" не существует
    Position: 82
    File: parse_relation.c
    Line: 1374
    Routine: parserOpenTable
2024-08-05 11:43:01.130 +05:00 [INF] User profile is available. Using 'C:\Users\z_zayniddinov\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-05 11:43:01.163 +05:00 [INF] Now listening on: http://[::]:3001
2024-08-05 11:43:01.164 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-05 11:43:01.164 +05:00 [INF] Hosting environment: Development
2024-08-05 11:43:01.165 +05:00 [INF] Content root path: C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi
2024-08-05 11:43:05.943 +05:00 [INF] Application is shutting down...
2024-08-05 11:53:49.965 +05:00 [INF] Migrations applying...
2024-08-05 11:53:50.660 +05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 11:53:50.689 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 11:53:50.702 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-08-05 11:53:50.712 +05:00 [INF] Applying migration '20240805064439_Initial'.
2024-08-05 11:53:50.763 +05:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'auth') THEN
        CREATE SCHEMA auth;
    END IF;
END $EF$;
2024-08-05 11:53:50.766 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'asset') THEN
        CREATE SCHEMA asset;
    END IF;
END $EF$;
2024-08-05 11:53:50.775 +05:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE auth.permissions (
    id bigint GENERATED BY DEFAULT AS IDENTITY,
    name jsonb NOT NULL,
    code integer NOT NULL,
    is_delete boolean NOT NULL,
    CONSTRAINT "PK_permissions" PRIMARY KEY (id)
);
2024-08-05 11:53:50.779 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE asset.static_files (
    id bigint GENERATED BY DEFAULT AS IDENTITY,
    path text NOT NULL,
    url text NOT NULL,
    size bigint NULL,
    type text NULL,
    file_extension text NULL,
    old_name text NULL,
    is_delete boolean NOT NULL,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    CONSTRAINT "PK_static_files" PRIMARY KEY (id)
);
2024-08-05 11:53:50.783 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE auth.structures (
    id bigint GENERATED BY DEFAULT AS IDENTITY,
    name jsonb NOT NULL,
    is_default boolean NOT NULL,
    is_delete boolean NOT NULL,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    CONSTRAINT "PK_structures" PRIMARY KEY (id)
);
2024-08-05 11:53:50.788 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE auth.tokens (
    id bigint GENERATED BY DEFAULT AS IDENTITY,
    user_id bigint NOT NULL,
    type integer NOT NULL,
    access_token text NOT NULL,
    refresh_token text NOT NULL,
    expire_refresh_token timestamp without time zone NOT NULL,
    is_delete boolean NOT NULL,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    CONSTRAINT "PK_tokens" PRIMARY KEY (id)
);
2024-08-05 11:53:50.792 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE auth.structure_permissions (
    id bigint GENERATED BY DEFAULT AS IDENTITY,
    structure_id bigint NOT NULL,
    permission_id bigint NOT NULL,
    granted_by_id bigint NOT NULL,
    is_delete boolean NOT NULL,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    CONSTRAINT "PK_structure_permissions" PRIMARY KEY (id),
    CONSTRAINT "FK_structure_permissions_permissions_permission_id" FOREIGN KEY (permission_id) REFERENCES auth.permissions (id) ON DELETE CASCADE,
    CONSTRAINT "FK_structure_permissions_structures_structure_id" FOREIGN KEY (structure_id) REFERENCES auth.structures (id) ON DELETE CASCADE
);
2024-08-05 11:53:50.796 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE auth.users (
    id bigint GENERATED BY DEFAULT AS IDENTITY,
    firstname text NOT NULL,
    lastname text NOT NULL,
    structure_id bigint NULL,
    is_delete boolean NOT NULL,
    created_at timestamp without time zone NOT NULL,
    updated_at timestamp without time zone NOT NULL,
    CONSTRAINT "PK_users" PRIMARY KEY (id),
    CONSTRAINT "FK_users_structures_structure_id" FOREIGN KEY (structure_id) REFERENCES auth.structures (id)
);
2024-08-05 11:53:50.801 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE auth.user_sign_methods (
    id bigint GENERATED BY DEFAULT AS IDENTITY,
    type integer NOT NULL,
    user_id bigint NOT NULL,
    phone_number text NULL,
    password_hash text NULL,
    is_delete boolean NOT NULL,
    CONSTRAINT "PK_user_sign_methods" PRIMARY KEY (id),
    CONSTRAINT "FK_user_sign_methods_users_user_id" FOREIGN KEY (user_id) REFERENCES auth.users (id) ON DELETE CASCADE
);
2024-08-05 11:53:50.803 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_permissions_code" ON auth.permissions (code);
2024-08-05 11:53:50.805 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_structure_permissions_permission_id" ON auth.structure_permissions (permission_id);
2024-08-05 11:53:50.807 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_structure_permissions_structure_id" ON auth.structure_permissions (structure_id);
2024-08-05 11:53:50.809 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_user_sign_methods_user_id" ON auth.user_sign_methods (user_id);
2024-08-05 11:53:50.812 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_users_structure_id" ON auth.users (structure_id);
2024-08-05 11:53:50.814 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240805064439_Initial', '7.0.11');
2024-08-05 11:53:50.823 +05:00 [INF] Migrations applied.
2024-08-05 11:53:50.830 +05:00 [INF] Permissions synchronization starting....
2024-08-05 11:53:50.995 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.052 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.056 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.058 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.060 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.061 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.063 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.064 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.066 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.133 +05:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Object), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = Object), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = Object), @p9='?' (DbType = Int32), @p10='?' (DbType = Boolean), @p11='?' (DbType = Object), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (DbType = Object), @p15='?' (DbType = Int32), @p16='?' (DbType = Boolean), @p17='?' (DbType = Object), @p18='?' (DbType = Int32), @p19='?' (DbType = Boolean), @p20='?' (DbType = Object), @p21='?' (DbType = Int32), @p22='?' (DbType = Boolean), @p23='?' (DbType = Object), @p24='?' (DbType = Int32), @p25='?' (DbType = Boolean), @p26='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO auth.permissions (code, is_delete, name)
VALUES (@p0, @p1, @p2)
RETURNING id;
INSERT INTO auth.permissions (code, is_delete, name)
VALUES (@p3, @p4, @p5)
RETURNING id;
INSERT INTO auth.permissions (code, is_delete, name)
VALUES (@p6, @p7, @p8)
RETURNING id;
INSERT INTO auth.permissions (code, is_delete, name)
VALUES (@p9, @p10, @p11)
RETURNING id;
INSERT INTO auth.permissions (code, is_delete, name)
VALUES (@p12, @p13, @p14)
RETURNING id;
INSERT INTO auth.permissions (code, is_delete, name)
VALUES (@p15, @p16, @p17)
RETURNING id;
INSERT INTO auth.permissions (code, is_delete, name)
VALUES (@p18, @p19, @p20)
RETURNING id;
INSERT INTO auth.permissions (code, is_delete, name)
VALUES (@p21, @p22, @p23)
RETURNING id;
INSERT INTO auth.permissions (code, is_delete, name)
VALUES (@p24, @p25, @p26)
RETURNING id;
2024-08-05 11:53:51.184 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code NOT IN (1100, 1102, 1200, 1201, 1202, 1203, 1300, 1301, 1302)
2024-08-05 11:53:51.186 +05:00 [INF] Permissions synchronization finished successfully.
2024-08-05 11:53:51.189 +05:00 [INF] Init sid data starting....
2024-08-05 11:53:51.202 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE NOT (s.is_delete) AND s.is_default
LIMIT 1
2024-08-05 11:53:51.222 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Object), @p4='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO auth.structures (created_at, is_default, is_delete, name, updated_at)
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING id;
2024-08-05 11:53:51.228 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE NOT (s.is_delete) AND s.id = -1
LIMIT 1
2024-08-05 11:53:51.232 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Object), @p5='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO auth.structures (id, created_at, is_default, is_delete, name, updated_at)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-08-05 11:53:51.237 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.250 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:53:51.266 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.270 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:53:51.271 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.272 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:53:51.274 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.275 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:53:51.277 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.278 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:53:51.280 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.282 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:53:51.284 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.287 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureDefault_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureDefault_Id_1
LIMIT 1
2024-08-05 11:53:51.289 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:53:51.291 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.292 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:53:51.294 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:53:51.295 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:53:51.302 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.firstname, u.is_delete, u.lastname, u.structure_id, u.updated_at
FROM auth.users AS u
WHERE NOT (u.is_delete) AND u.id = -1
LIMIT 1
2024-08-05 11:53:51.345 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int64), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64), @p5='?' (DbType = DateTime), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int64), @p8='?' (DbType = Boolean), @p9='?' (DbType = Int64), @p10='?' (DbType = Int64), @p11='?' (DbType = DateTime), @p12='?' (DbType = DateTime), @p13='?' (DbType = Int64), @p14='?' (DbType = Boolean), @p15='?' (DbType = Int64), @p16='?' (DbType = Int64), @p17='?' (DbType = DateTime), @p18='?' (DbType = DateTime), @p19='?' (DbType = Int64), @p20='?' (DbType = Boolean), @p21='?' (DbType = Int64), @p22='?' (DbType = Int64), @p23='?' (DbType = DateTime), @p24='?' (DbType = DateTime), @p25='?' (DbType = Int64), @p26='?' (DbType = Boolean), @p27='?' (DbType = Int64), @p28='?' (DbType = Int64), @p29='?' (DbType = DateTime), @p30='?' (DbType = DateTime), @p31='?' (DbType = Int64), @p32='?' (DbType = Boolean), @p33='?' (DbType = Int64), @p34='?' (DbType = Int64), @p35='?' (DbType = DateTime), @p36='?' (DbType = DateTime), @p37='?' (DbType = Int64), @p38='?' (DbType = Boolean), @p39='?' (DbType = Int64), @p40='?' (DbType = Int64), @p41='?' (DbType = DateTime), @p42='?' (DbType = DateTime), @p43='?' (DbType = Int64), @p44='?' (DbType = Boolean), @p45='?' (DbType = Int64), @p46='?' (DbType = Int64), @p47='?' (DbType = DateTime), @p48='?' (DbType = DateTime), @p49='?' (DbType = Int64), @p50='?' (DbType = Boolean), @p51='?' (DbType = Int64), @p52='?' (DbType = Int64), @p53='?' (DbType = DateTime), @p54='?' (DbType = DateTime), @p55='?' (DbType = Int64), @p56='?' (DbType = Boolean), @p57='?' (DbType = Int64), @p58='?' (DbType = Int64), @p59='?' (DbType = DateTime), @p60='?' (DbType = Int64), @p61='?' (DbType = DateTime), @p62='?', @p63='?' (DbType = Boolean), @p64='?', @p65='?' (DbType = Int64), @p66='?' (DbType = DateTime), @p67='?' (DbType = Boolean), @p68='?', @p69='?', @p70='?' (DbType = Int32), @p71='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO auth.structure_permissions (created_at, granted_by_id, is_delete, permission_id, structure_id, updated_at)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING id;
INSERT INTO auth.structure_permissions (created_at, granted_by_id, is_delete, permission_id, structure_id, updated_at)
VALUES (@p6, @p7, @p8, @p9, @p10, @p11)
RETURNING id;
INSERT INTO auth.structure_permissions (created_at, granted_by_id, is_delete, permission_id, structure_id, updated_at)
VALUES (@p12, @p13, @p14, @p15, @p16, @p17)
RETURNING id;
INSERT INTO auth.structure_permissions (created_at, granted_by_id, is_delete, permission_id, structure_id, updated_at)
VALUES (@p18, @p19, @p20, @p21, @p22, @p23)
RETURNING id;
INSERT INTO auth.structure_permissions (created_at, granted_by_id, is_delete, permission_id, structure_id, updated_at)
VALUES (@p24, @p25, @p26, @p27, @p28, @p29)
RETURNING id;
INSERT INTO auth.structure_permissions (created_at, granted_by_id, is_delete, permission_id, structure_id, updated_at)
VALUES (@p30, @p31, @p32, @p33, @p34, @p35)
RETURNING id;
INSERT INTO auth.structure_permissions (created_at, granted_by_id, is_delete, permission_id, structure_id, updated_at)
VALUES (@p36, @p37, @p38, @p39, @p40, @p41)
RETURNING id;
INSERT INTO auth.structure_permissions (created_at, granted_by_id, is_delete, permission_id, structure_id, updated_at)
VALUES (@p42, @p43, @p44, @p45, @p46, @p47)
RETURNING id;
INSERT INTO auth.structure_permissions (created_at, granted_by_id, is_delete, permission_id, structure_id, updated_at)
VALUES (@p48, @p49, @p50, @p51, @p52, @p53)
RETURNING id;
INSERT INTO auth.structure_permissions (created_at, granted_by_id, is_delete, permission_id, structure_id, updated_at)
VALUES (@p54, @p55, @p56, @p57, @p58, @p59)
RETURNING id;
INSERT INTO auth.users (id, created_at, firstname, is_delete, lastname, structure_id, updated_at)
VALUES (@p60, @p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO auth.user_sign_methods (is_delete, password_hash, phone_number, type, user_id)
VALUES (@p67, @p68, @p69, @p70, @p71)
RETURNING id;
2024-08-05 11:53:51.352 +05:00 [INF] Init sid data finished successfully.
2024-08-05 11:53:51.392 +05:00 [INF] User profile is available. Using 'C:\Users\z_zayniddinov\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-05 11:53:51.421 +05:00 [INF] Now listening on: http://[::]:3001
2024-08-05 11:53:51.423 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-05 11:53:51.423 +05:00 [INF] Hosting environment: Development
2024-08-05 11:53:51.423 +05:00 [INF] Content root path: C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi
2024-08-05 11:54:33.955 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/ - null null
2024-08-05 11:54:34.020 +05:00 [WRN] Failed to determine the https port for redirect.
2024-08-05 11:54:34.023 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/ - 404 0 null 72.1095ms
2024-08-05 11:54:34.029 +05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:3001/, Response status code: 404
2024-08-05 11:54:39.662 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger - null null
2024-08-05 11:54:39.666 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger - 301 0 null 4.785ms
2024-08-05 11:54:39.669 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/index.html - null null
2024-08-05 11:54:39.725 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/index.html - 200 null text/html;charset=utf-8 55.85ms
2024-08-05 11:54:39.742 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/swagger-ui.css - null null
2024-08-05 11:54:39.743 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/swagger-ui-bundle.js - null null
2024-08-05 11:54:39.743 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/swagger-ui-standalone-preset.js - null null
2024-08-05 11:54:39.761 +05:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-08-05 11:54:39.761 +05:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-08-05 11:54:39.761 +05:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-08-05 11:54:39.765 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/swagger-ui.css - 200 144929 text/css 23.0519ms
2024-08-05 11:54:39.765 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/swagger-ui-standalone-preset.js - 200 312163 text/javascript 21.2178ms
2024-08-05 11:54:39.765 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/swagger-ui-bundle.js - 200 1061536 text/javascript 21.2146ms
2024-08-05 11:54:39.837 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/v1/swagger.json - null null
2024-08-05 11:54:39.844 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/v1/swagger.json - 404 0 null 6.8777ms
2024-08-05 11:54:39.859 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/favicon-32x32.png - null null
2024-08-05 11:54:39.861 +05:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-08-05 11:54:39.863 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/favicon-32x32.png - 200 628 image/png 3.3018ms
2024-08-05 11:55:20.762 +05:00 [INF] Application is shutting down...
2024-08-05 11:55:36.546 +05:00 [INF] Migrations applying...
2024-08-05 11:55:37.347 +05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 11:55:37.376 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 11:55:37.390 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-08-05 11:55:37.403 +05:00 [INF] No migrations were applied. The database is already up to date.
2024-08-05 11:55:37.403 +05:00 [INF] Migrations applied.
2024-08-05 11:55:37.410 +05:00 [INF] Permissions synchronization starting....
2024-08-05 11:55:37.574 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.624 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.628 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.629 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.631 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.633 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.635 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.637 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.638 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.688 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code NOT IN (1100, 1102, 1200, 1201, 1202, 1203, 1300, 1301, 1302)
2024-08-05 11:55:37.690 +05:00 [INF] Permissions synchronization finished successfully.
2024-08-05 11:55:37.693 +05:00 [INF] Init sid data starting....
2024-08-05 11:55:37.705 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE NOT (s.is_delete) AND s.is_default
LIMIT 1
2024-08-05 11:55:37.721 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE NOT (s.is_delete) AND s.id = -1
LIMIT 1
2024-08-05 11:55:37.725 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.732 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:55:37.750 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.753 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:55:37.755 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.756 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:55:37.758 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.760 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:55:37.762 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.764 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:55:37.765 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.767 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:55:37.769 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.772 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureDefault_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureDefault_Id_1
LIMIT 1
2024-08-05 11:55:37.773 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:55:37.775 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.777 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:55:37.779 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:55:37.780 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:55:37.786 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.firstname, u.is_delete, u.lastname, u.structure_id, u.updated_at
FROM auth.users AS u
WHERE NOT (u.is_delete) AND u.id = -1
LIMIT 1
2024-08-05 11:55:37.806 +05:00 [INF] Init sid data finished successfully.
2024-08-05 11:55:37.846 +05:00 [INF] User profile is available. Using 'C:\Users\z_zayniddinov\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-05 11:55:37.876 +05:00 [INF] Now listening on: http://[::]:3001
2024-08-05 11:55:37.877 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-05 11:55:37.877 +05:00 [INF] Hosting environment: Development
2024-08-05 11:55:37.878 +05:00 [INF] Content root path: C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi
2024-08-05 11:55:37.954 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/index.html - null null
2024-08-05 11:55:38.033 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/index.html - 200 null text/html;charset=utf-8 81.3303ms
2024-08-05 11:55:38.149 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/v1/swagger.json - null null
2024-08-05 11:55:38.157 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/v1/swagger.json - 404 0 null 8.2599ms
2024-08-05 11:56:28.074 +05:00 [INF] Application is shutting down...
2024-08-05 11:56:31.135 +05:00 [INF] Migrations applying...
2024-08-05 11:56:31.924 +05:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 11:56:31.956 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 11:56:31.971 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-08-05 11:56:31.984 +05:00 [INF] No migrations were applied. The database is already up to date.
2024-08-05 11:56:31.985 +05:00 [INF] Migrations applied.
2024-08-05 11:56:31.993 +05:00 [INF] Permissions synchronization starting....
2024-08-05 11:56:32.173 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.224 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.228 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.230 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.231 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.233 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.234 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.236 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.237 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.289 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code NOT IN (1100, 1102, 1200, 1201, 1202, 1203, 1300, 1301, 1302)
2024-08-05 11:56:32.291 +05:00 [INF] Permissions synchronization finished successfully.
2024-08-05 11:56:32.294 +05:00 [INF] Init sid data starting....
2024-08-05 11:56:32.306 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE NOT (s.is_delete) AND s.is_default
LIMIT 1
2024-08-05 11:56:32.323 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE NOT (s.is_delete) AND s.id = -1
LIMIT 1
2024-08-05 11:56:32.327 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.334 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:56:32.353 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.356 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:56:32.358 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.359 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:56:32.361 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.362 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:56:32.364 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.365 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:56:32.366 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.368 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:56:32.370 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.373 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureDefault_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureDefault_Id_1
LIMIT 1
2024-08-05 11:56:32.375 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:56:32.377 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.378 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:56:32.380 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:56:32.381 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:56:32.387 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.firstname, u.is_delete, u.lastname, u.structure_id, u.updated_at
FROM auth.users AS u
WHERE NOT (u.is_delete) AND u.id = -1
LIMIT 1
2024-08-05 11:56:32.408 +05:00 [INF] Init sid data finished successfully.
2024-08-05 11:56:32.450 +05:00 [INF] User profile is available. Using 'C:\Users\z_zayniddinov\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-05 11:56:32.486 +05:00 [INF] Now listening on: http://[::]:3001
2024-08-05 11:56:32.488 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-05 11:56:32.488 +05:00 [INF] Hosting environment: Development
2024-08-05 11:56:32.488 +05:00 [INF] Content root path: C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi
2024-08-05 11:56:32.929 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/index.html - null null
2024-08-05 11:56:33.003 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/index.html - 200 null text/html;charset=utf-8 77.0512ms
2024-08-05 11:56:33.061 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/v1/swagger.json - null null
2024-08-05 11:56:33.130 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.2084ms
2024-08-05 11:56:50.930 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:3001/api/Auth/Sign - application/json 62
2024-08-05 11:56:50.938 +05:00 [INF] CORS policy execution successful.
2024-08-05 11:56:50.940 +05:00 [INF] CORS policy execution successful.
2024-08-05 11:56:50.941 +05:00 [WRN] Failed to determine the https port for redirect.
2024-08-05 11:56:50.944 +05:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Sign (AuthApi)'
2024-08-05 11:56:50.958 +05:00 [INF] Route matched with {action = "Sign", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[WebCore.Models.ResponseModel] Sign(Entity.DataTransferObjects.Authentication.AuthenticationDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2024-08-05 11:56:50.988 +05:00 [INF] Executing action method AuthApi.Controllers.AuthController.Sign (AuthApi) - Validation state: "Valid"
2024-08-05 11:56:51.015 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__deleted_0='?' (DbType = Boolean), @__authenticationDto_phoneNumber_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.is_delete, u.type, u.user_id, u.password_hash, u.phone_number
FROM auth.user_sign_methods AS u
WHERE u.is_delete = @__deleted_0 AND u.phone_number = @__authenticationDto_phoneNumber_1
LIMIT 1
2024-08-05 11:56:51.056 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.firstname, u.is_delete, u.lastname, u.structure_id, u.updated_at
FROM auth.users AS u
WHERE u.id = @__p_0
2024-08-05 11:56:51.069 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE s.id = @__p_0
2024-08-05 11:56:51.078 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE s.structure_id = @__p_0
2024-08-05 11:56:51.087 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:56:51.091 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:56:51.093 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:56:51.095 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:56:51.097 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:56:51.099 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:56:51.102 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:56:51.105 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:56:51.107 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:56:51.136 +05:00 [INF] Executed action AuthApi.Controllers.AuthController.Sign (AuthApi) in 171.5765ms
2024-08-05 11:56:51.138 +05:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Sign (AuthApi)'
2024-08-05 11:56:51.168 +05:00 [ERR] Exception: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS256', the key size must be greater than: '256' bits, key has '248' bits. (Parameter 'keyBytes')
System.ArgumentOutOfRangeException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS256', the key size must be greater than: '256' bits, key has '248' bits. (Parameter 'keyBytes')
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.ValidateKeySize(Byte[] keyBytes, String algorithm, Int32 expectedNumberOfBytes)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.CreateKeyedHashAlgorithm()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.CreateInstance()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.Allocate()
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.GetKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.Sign(Byte[] input)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at AuthService.Services.AuthService.SignByPasswordAsync(AuthenticationDto authenticationDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthService\Services\AuthService.cs:line 63
   at AuthApi.Controllers.AuthController.Sign(AuthenticationDto authenticationDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi\Controllers\AuthController.cs:line 12
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at WebCore.Middlewares.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Middlewares\GlobalExceptionHandlerMiddleware.cs:line 15
2024-08-05 11:56:51.176 +05:00 [FTL] Exception: 
System.ArgumentOutOfRangeException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS256', the key size must be greater than: '256' bits, key has '248' bits. (Parameter 'keyBytes')
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.ValidateKeySize(Byte[] keyBytes, String algorithm, Int32 expectedNumberOfBytes)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.CreateKeyedHashAlgorithm()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.CreateInstance()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.Allocate()
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.GetKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.Sign(Byte[] input)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at AuthService.Services.AuthService.SignByPasswordAsync(AuthenticationDto authenticationDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthService\Services\AuthService.cs:line 63
   at AuthApi.Controllers.AuthController.Sign(AuthenticationDto authenticationDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi\Controllers\AuthController.cs:line 12
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at WebCore.Middlewares.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Middlewares\GlobalExceptionHandlerMiddleware.cs:line 15
2024-08-05 11:56:51.965 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:3001/api/Auth/Sign - 500 null application/json; charset=utf-8 1034.8306ms
2024-08-05 11:57:30.182 +05:00 [INF] Application is shutting down...
2024-08-05 11:57:33.339 +05:00 [INF] Migrations applying...
2024-08-05 11:57:34.180 +05:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 11:57:34.208 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 11:57:34.222 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-08-05 11:57:34.234 +05:00 [INF] No migrations were applied. The database is already up to date.
2024-08-05 11:57:34.234 +05:00 [INF] Migrations applied.
2024-08-05 11:57:34.241 +05:00 [INF] Permissions synchronization starting....
2024-08-05 11:57:34.405 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.454 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.457 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.459 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.461 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.464 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.466 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.468 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.470 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.517 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code NOT IN (1100, 1102, 1200, 1201, 1202, 1203, 1300, 1301, 1302)
2024-08-05 11:57:34.520 +05:00 [INF] Permissions synchronization finished successfully.
2024-08-05 11:57:34.523 +05:00 [INF] Init sid data starting....
2024-08-05 11:57:34.534 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE NOT (s.is_delete) AND s.is_default
LIMIT 1
2024-08-05 11:57:34.551 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE NOT (s.is_delete) AND s.id = -1
LIMIT 1
2024-08-05 11:57:34.554 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.561 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:57:34.578 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.581 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:57:34.583 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.586 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:57:34.587 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.588 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:57:34.590 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.592 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:57:34.593 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.594 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:57:34.596 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.599 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureDefault_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureDefault_Id_1
LIMIT 1
2024-08-05 11:57:34.601 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:57:34.603 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.604 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:57:34.606 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 11:57:34.608 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 11:57:34.613 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.firstname, u.is_delete, u.lastname, u.structure_id, u.updated_at
FROM auth.users AS u
WHERE NOT (u.is_delete) AND u.id = -1
LIMIT 1
2024-08-05 11:57:34.632 +05:00 [INF] Init sid data finished successfully.
2024-08-05 11:57:34.671 +05:00 [INF] User profile is available. Using 'C:\Users\z_zayniddinov\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-05 11:57:34.700 +05:00 [INF] Now listening on: http://[::]:3001
2024-08-05 11:57:34.702 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-05 11:57:34.703 +05:00 [INF] Hosting environment: Development
2024-08-05 11:57:34.703 +05:00 [INF] Content root path: C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi
2024-08-05 11:57:34.891 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/index.html - null null
2024-08-05 11:57:34.969 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/index.html - 200 null text/html;charset=utf-8 80.9379ms
2024-08-05 11:57:35.027 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/v1/swagger.json - null null
2024-08-05 11:57:35.105 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 78.1873ms
2024-08-05 11:57:44.364 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:3001/api/Auth/Sign - application/json 62
2024-08-05 11:57:44.372 +05:00 [INF] CORS policy execution successful.
2024-08-05 11:57:44.373 +05:00 [INF] CORS policy execution successful.
2024-08-05 11:57:44.374 +05:00 [WRN] Failed to determine the https port for redirect.
2024-08-05 11:57:44.377 +05:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Sign (AuthApi)'
2024-08-05 11:57:44.386 +05:00 [INF] Route matched with {action = "Sign", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[WebCore.Models.ResponseModel] Sign(Entity.DataTransferObjects.Authentication.AuthenticationDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2024-08-05 11:57:44.403 +05:00 [INF] Executing action method AuthApi.Controllers.AuthController.Sign (AuthApi) - Validation state: "Valid"
2024-08-05 11:57:44.420 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__deleted_0='?' (DbType = Boolean), @__authenticationDto_phoneNumber_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.is_delete, u.type, u.user_id, u.password_hash, u.phone_number
FROM auth.user_sign_methods AS u
WHERE u.is_delete = @__deleted_0 AND u.phone_number = @__authenticationDto_phoneNumber_1
LIMIT 1
2024-08-05 11:57:44.447 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.firstname, u.is_delete, u.lastname, u.structure_id, u.updated_at
FROM auth.users AS u
WHERE u.id = @__p_0
2024-08-05 11:57:44.455 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE s.id = @__p_0
2024-08-05 11:57:44.461 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE s.structure_id = @__p_0
2024-08-05 11:57:44.467 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:57:44.470 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:57:44.472 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:57:44.474 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:57:44.476 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:57:44.478 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:57:44.479 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:57:44.481 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:57:44.482 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 11:57:44.569 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO auth.tokens (access_token, created_at, expire_refresh_token, is_delete, refresh_token, type, updated_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING id;
2024-08-05 11:57:44.585 +05:00 [INF] Executed action method AuthApi.Controllers.AuthController.Sign (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 178.6351ms.
2024-08-05 11:57:44.592 +05:00 [INF] Executing ObjectResult, writing value of type 'WebCore.Models.ResponseModel'.
2024-08-05 11:57:44.612 +05:00 [INF] Executed action AuthApi.Controllers.AuthController.Sign (AuthApi) in 223.0859ms
2024-08-05 11:57:44.613 +05:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Sign (AuthApi)'
2024-08-05 11:57:44.618 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:3001/api/Auth/Sign - 200 null application/json; charset=utf-8 254.1719ms
2024-08-05 11:58:00.511 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/api/Role/GetAllStructures - null null
2024-08-05 11:58:00.514 +05:00 [INF] Executing endpoint 'AuthApi.Controllers.RoleController.GetAllStructures (AuthApi)'
2024-08-05 11:58:00.518 +05:00 [INF] Route matched with {action = "GetAllStructures", controller = "Role"}. Executing controller action with signature System.Threading.Tasks.ValueTask`1[WebCore.Models.ResponseModel] GetAllStructures() on controller AuthApi.Controllers.RoleController (AuthApi).
2024-08-05 11:58:00.526 +05:00 [INF] Executed action AuthApi.Controllers.RoleController.GetAllStructures (AuthApi) in 6.7005ms
2024-08-05 11:58:00.527 +05:00 [INF] Executed endpoint 'AuthApi.Controllers.RoleController.GetAllStructures (AuthApi)'
2024-08-05 11:58:00.540 +05:00 [ERR] Exception: Forbidden
Entity.Exeptions.UnauthorizedException: Forbidden
   at WebCore.Filters.PermissionRequirementFilter.OnAuthorizationAsync(AuthorizationFilterContext context) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Filters\PermissionRequirementFilter.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at WebCore.Middlewares.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Middlewares\GlobalExceptionHandlerMiddleware.cs:line 15
2024-08-05 11:58:00.544 +05:00 [FTL] Exception: 
Entity.Exeptions.UnauthorizedException: Forbidden
   at WebCore.Filters.PermissionRequirementFilter.OnAuthorizationAsync(AuthorizationFilterContext context) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Filters\PermissionRequirementFilter.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at WebCore.Middlewares.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Middlewares\GlobalExceptionHandlerMiddleware.cs:line 15
2024-08-05 11:58:01.118 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/api/Role/GetAllStructures - 401 null application/json; charset=utf-8 607.4351ms
2024-08-05 11:58:13.967 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/api/Role/GetAllStructures - null null
2024-08-05 11:58:14.006 +05:00 [INF] Executing endpoint 'AuthApi.Controllers.RoleController.GetAllStructures (AuthApi)'
2024-08-05 11:58:14.008 +05:00 [INF] Route matched with {action = "GetAllStructures", controller = "Role"}. Executing controller action with signature System.Threading.Tasks.ValueTask`1[WebCore.Models.ResponseModel] GetAllStructures() on controller AuthApi.Controllers.RoleController (AuthApi).
2024-08-05 11:58:14.011 +05:00 [INF] Executing action method AuthApi.Controllers.RoleController.GetAllStructures (AuthApi) - Validation state: "Valid"
2024-08-05 11:58:14.024 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__deleted_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.name, s.is_default
FROM auth.structures AS s
WHERE s.is_delete = @__deleted_0
ORDER BY s.id
2024-08-05 11:58:14.026 +05:00 [INF] Executed action method AuthApi.Controllers.RoleController.GetAllStructures (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 14.0993ms.
2024-08-05 11:58:14.027 +05:00 [INF] Executing ObjectResult, writing value of type 'WebCore.Models.ResponseModel'.
2024-08-05 11:58:14.039 +05:00 [INF] Executed action AuthApi.Controllers.RoleController.GetAllStructures (AuthApi) in 29.5399ms
2024-08-05 11:58:14.040 +05:00 [INF] Executed endpoint 'AuthApi.Controllers.RoleController.GetAllStructures (AuthApi)'
2024-08-05 11:58:14.041 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/api/Role/GetAllStructures - 200 null application/json; charset=utf-8 74.3435ms
2024-08-05 12:10:16.083 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/api/auth/sign - application/json 69
2024-08-05 12:10:16.085 +05:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2024-08-05 12:10:16.086 +05:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2024-08-05 12:10:16.086 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/api/auth/sign - 405 0 null 3.2226ms
2024-08-05 12:10:22.455 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:3001/api/auth/sign - application/json 69
2024-08-05 12:10:22.457 +05:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Sign (AuthApi)'
2024-08-05 12:10:22.460 +05:00 [INF] Route matched with {action = "Sign", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[WebCore.Models.ResponseModel] Sign(Entity.DataTransferObjects.Authentication.AuthenticationDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2024-08-05 12:10:22.462 +05:00 [INF] Executing action method AuthApi.Controllers.AuthController.Sign (AuthApi) - Validation state: "Valid"
2024-08-05 12:10:22.483 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__deleted_0='?' (DbType = Boolean), @__authenticationDto_phoneNumber_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.is_delete, u.type, u.user_id, u.password_hash, u.phone_number
FROM auth.user_sign_methods AS u
WHERE u.is_delete = @__deleted_0 AND u.phone_number = @__authenticationDto_phoneNumber_1
LIMIT 1
2024-08-05 12:10:22.487 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.firstname, u.is_delete, u.lastname, u.structure_id, u.updated_at
FROM auth.users AS u
WHERE u.id = @__p_0
2024-08-05 12:10:22.490 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE s.id = @__p_0
2024-08-05 12:10:22.493 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE s.structure_id = @__p_0
2024-08-05 12:10:22.495 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:10:22.497 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:10:22.498 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:10:22.500 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:10:22.502 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:10:22.503 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:10:22.505 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:10:22.507 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:10:22.509 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:10:22.515 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO auth.tokens (access_token, created_at, expire_refresh_token, is_delete, refresh_token, type, updated_at, user_id)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING id;
2024-08-05 12:10:22.516 +05:00 [INF] Executed action method AuthApi.Controllers.AuthController.Sign (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 53.1781ms.
2024-08-05 12:10:22.517 +05:00 [INF] Executing ObjectResult, writing value of type 'WebCore.Models.ResponseModel'.
2024-08-05 12:10:22.520 +05:00 [INF] Executed action AuthApi.Controllers.AuthController.Sign (AuthApi) in 59.3615ms
2024-08-05 12:10:22.521 +05:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Sign (AuthApi)'
2024-08-05 12:10:22.522 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:3001/api/auth/sign - 200 null application/json; charset=utf-8 67.0417ms
2024-08-05 12:15:19.205 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:3001/api/auth/register - application/json 132
2024-08-05 12:15:19.207 +05:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Register (AuthApi)'
2024-08-05 12:15:19.210 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[WebCore.Models.ResponseModel] Register(Entity.DataTransferObjects.Authentication.UserRegisterDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2024-08-05 12:15:19.215 +05:00 [INF] Executing action method AuthApi.Controllers.AuthController.Register (AuthApi) - Validation state: "Valid"
2024-08-05 12:15:19.226 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__deleted_0='?' (DbType = Boolean), @__userRegisterDto_phoneNumber_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM auth.user_sign_methods AS u
    WHERE u.is_delete = @__deleted_0 AND u.phone_number = @__userRegisterDto_phoneNumber_1)
2024-08-05 12:15:19.229 +05:00 [INF] Executed action AuthApi.Controllers.AuthController.Register (AuthApi) in 17.4392ms
2024-08-05 12:15:19.229 +05:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Register (AuthApi)'
2024-08-05 12:15:19.232 +05:00 [ERR] Exception: User name or login already exists
Entity.Exeptions.AlreadyExistsException: User name or login already exists
   at AuthService.Services.AuthService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthService\Services\AuthService.cs:line 28
   at AuthApi.Controllers.AuthController.Register(UserRegisterDto userRegisterDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi\Controllers\AuthController.cs:line 16
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at WebCore.Middlewares.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Middlewares\GlobalExceptionHandlerMiddleware.cs:line 15
2024-08-05 12:15:30.700 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:3001/api/auth/register - application/json 132
2024-08-05 12:15:30.702 +05:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Register (AuthApi)'
2024-08-05 12:15:30.703 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[WebCore.Models.ResponseModel] Register(Entity.DataTransferObjects.Authentication.UserRegisterDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2024-08-05 12:15:30.705 +05:00 [INF] Executing action method AuthApi.Controllers.AuthController.Register (AuthApi) - Validation state: "Valid"
2024-08-05 12:15:30.732 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__deleted_0='?' (DbType = Boolean), @__userRegisterDto_phoneNumber_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM auth.user_sign_methods AS u
    WHERE u.is_delete = @__deleted_0 AND u.phone_number = @__userRegisterDto_phoneNumber_1)
2024-08-05 12:15:30.734 +05:00 [INF] Executed action AuthApi.Controllers.AuthController.Register (AuthApi) in 29.4184ms
2024-08-05 12:15:30.734 +05:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Register (AuthApi)'
2024-08-05 12:15:30.735 +05:00 [ERR] Exception: User name or login already exists
Entity.Exeptions.AlreadyExistsException: User name or login already exists
   at AuthService.Services.AuthService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthService\Services\AuthService.cs:line 28
   at AuthApi.Controllers.AuthController.Register(UserRegisterDto userRegisterDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi\Controllers\AuthController.cs:line 16
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at WebCore.Middlewares.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Middlewares\GlobalExceptionHandlerMiddleware.cs:line 15
2024-08-05 12:15:30.739 +05:00 [FTL] Exception: 
Entity.Exeptions.AlreadyExistsException: User name or login already exists
   at AuthService.Services.AuthService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthService\Services\AuthService.cs:line 28
   at AuthApi.Controllers.AuthController.Register(UserRegisterDto userRegisterDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi\Controllers\AuthController.cs:line 16
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at WebCore.Middlewares.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Middlewares\GlobalExceptionHandlerMiddleware.cs:line 15
2024-08-05 12:15:31.214 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:3001/api/auth/register - 403 null application/json; charset=utf-8 513.5737ms
2024-08-05 12:15:19.235 +05:00 [FTL] Exception: 
Entity.Exeptions.AlreadyExistsException: User name or login already exists
   at AuthService.Services.AuthService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthService\Services\AuthService.cs:line 28
   at AuthApi.Controllers.AuthController.Register(UserRegisterDto userRegisterDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi\Controllers\AuthController.cs:line 16
   at lambda_method472(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at WebCore.Middlewares.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Middlewares\GlobalExceptionHandlerMiddleware.cs:line 15
2024-08-05 12:15:34.828 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:3001/api/auth/register - 403 null application/json; charset=utf-8 15623.451ms
2024-08-05 12:20:24.111 +05:00 [INF] Application is shutting down...
2024-08-05 12:20:27.927 +05:00 [INF] Migrations applying...
2024-08-05 12:20:28.759 +05:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 12:20:28.790 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2024-08-05 12:20:28.804 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-08-05 12:20:28.817 +05:00 [INF] No migrations were applied. The database is already up to date.
2024-08-05 12:20:28.818 +05:00 [INF] Migrations applied.
2024-08-05 12:20:28.826 +05:00 [INF] Permissions synchronization starting....
2024-08-05 12:20:28.999 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.050 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.053 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.055 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.057 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.059 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.060 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.062 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.064 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.115 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.code NOT IN (1100, 1102, 1200, 1201, 1202, 1203, 1300, 1301, 1302)
2024-08-05 12:20:29.117 +05:00 [INF] Permissions synchronization finished successfully.
2024-08-05 12:20:29.120 +05:00 [INF] Init sid data starting....
2024-08-05 12:20:29.132 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE NOT (s.is_delete) AND s.is_default
LIMIT 1
2024-08-05 12:20:29.149 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE NOT (s.is_delete) AND s.id = -1
LIMIT 1
2024-08-05 12:20:29.152 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.160 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 12:20:29.178 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.181 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 12:20:29.184 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.185 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 12:20:29.187 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.189 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 12:20:29.191 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.193 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 12:20:29.195 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.196 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 12:20:29.198 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.201 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureDefault_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureDefault_Id_1
LIMIT 1
2024-08-05 12:20:29.203 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 12:20:29.205 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.207 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 12:20:29.208 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE NOT (p.is_delete) AND p.code = @__p_0
LIMIT 1
2024-08-05 12:20:29.210 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__storedCode_Id_0='?' (DbType = Int64), @__structureSuperAdmin_Id_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE NOT (s.is_delete) AND s.permission_id = @__storedCode_Id_0 AND s.structure_id = @__structureSuperAdmin_Id_1
LIMIT 1
2024-08-05 12:20:29.216 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.firstname, u.is_delete, u.lastname, u.structure_id, u.updated_at
FROM auth.users AS u
WHERE NOT (u.is_delete) AND u.id = -1
LIMIT 1
2024-08-05 12:20:29.236 +05:00 [INF] Init sid data finished successfully.
2024-08-05 12:20:29.276 +05:00 [INF] User profile is available. Using 'C:\Users\z_zayniddinov\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-05 12:20:29.307 +05:00 [INF] Now listening on: http://[::]:3001
2024-08-05 12:20:29.309 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-05 12:20:29.309 +05:00 [INF] Hosting environment: Development
2024-08-05 12:20:29.310 +05:00 [INF] Content root path: C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi
2024-08-05 12:20:29.862 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/index.html - null null
2024-08-05 12:20:29.942 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/index.html - 200 null text/html;charset=utf-8 83.0895ms
2024-08-05 12:20:30.026 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:3001/swagger/v1/swagger.json - null null
2024-08-05 12:20:30.098 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:3001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.8673ms
2024-08-05 12:20:32.946 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:3001/api/auth/register - application/json 132
2024-08-05 12:20:32.982 +05:00 [WRN] Failed to determine the https port for redirect.
2024-08-05 12:20:32.984 +05:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.Register (AuthApi)'
2024-08-05 12:20:32.994 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[WebCore.Models.ResponseModel] Register(Entity.DataTransferObjects.Authentication.UserRegisterDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2024-08-05 12:20:33.014 +05:00 [INF] Executing action method AuthApi.Controllers.AuthController.Register (AuthApi) - Validation state: "Valid"
2024-08-05 12:20:33.034 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__deleted_0='?' (DbType = Boolean), @__userRegisterDto_phoneNumber_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM auth.user_sign_methods AS u
    WHERE u.is_delete = @__deleted_0 AND u.phone_number = @__userRegisterDto_phoneNumber_1)
2024-08-05 12:20:33.045 +05:00 [INF] Executed action AuthApi.Controllers.AuthController.Register (AuthApi) in 46.9694ms
2024-08-05 12:20:33.046 +05:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.Register (AuthApi)'
2024-08-05 12:20:33.066 +05:00 [ERR] Exception: Phone number already exists
Entity.Exeptions.AlreadyExistsException: Phone number already exists
   at AuthService.Services.AuthService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthService\Services\AuthService.cs:line 28
   at AuthApi.Controllers.AuthController.Register(UserRegisterDto userRegisterDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi\Controllers\AuthController.cs:line 16
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at WebCore.Middlewares.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Middlewares\GlobalExceptionHandlerMiddleware.cs:line 15
2024-08-05 12:20:33.072 +05:00 [FTL] Exception: 
Entity.Exeptions.AlreadyExistsException: Phone number already exists
   at AuthService.Services.AuthService.RegisterAsync(UserRegisterDto userRegisterDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthService\Services\AuthService.cs:line 28
   at AuthApi.Controllers.AuthController.Register(UserRegisterDto userRegisterDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi\Controllers\AuthController.cs:line 16
   at lambda_method273(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at WebCore.Middlewares.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Middlewares\GlobalExceptionHandlerMiddleware.cs:line 15
2024-08-05 12:20:33.654 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:3001/api/auth/register - 403 null application/json; charset=utf-8 708.1763ms
2024-08-05 12:22:28.866 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:3001/api/auth/refreshtoken - application/json 539
2024-08-05 12:22:28.869 +05:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.RefreshToken (AuthApi)'
2024-08-05 12:22:28.872 +05:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[WebCore.Models.ResponseModel] RefreshToken(Entity.DataTransferObjects.Authentication.TokenDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2024-08-05 12:22:28.881 +05:00 [INF] Executing action method AuthApi.Controllers.AuthController.RefreshToken (AuthApi) - Validation state: "Valid"
2024-08-05 12:22:28.888 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__deleted_0='?' (DbType = Boolean), @__tokenDto_accessToken_1='?', @__tokenDto_refreshToken_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.created_at, t.expire_refresh_token, t.is_delete, t.refresh_token, t.type, t.updated_at, t.user_id
FROM auth.tokens AS t
WHERE t.is_delete = @__deleted_0 AND t.access_token = @__tokenDto_accessToken_1 AND t.refresh_token = @__tokenDto_refreshToken_2
LIMIT 1
2024-08-05 12:22:28.902 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__deleted_0='?' (DbType = Boolean), @__deleted_1='?' (DbType = Boolean), @__id_2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT u.id, u.created_at, u.firstname, u.is_delete, u.lastname, u.structure_id, u.updated_at
FROM auth.users AS u
WHERE u.is_delete = @__deleted_0 AND u.is_delete = @__deleted_1 AND u.id = @__id_2
LIMIT 1
2024-08-05 12:22:28.921 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.is_default, s.is_delete, s.name, s.updated_at
FROM auth.structures AS s
WHERE s.id = @__p_0
2024-08-05 12:22:28.928 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT s.id, s.created_at, s.granted_by_id, s.is_delete, s.permission_id, s.structure_id, s.updated_at
FROM auth.structure_permissions AS s
WHERE s.structure_id = @__p_0
2024-08-05 12:22:28.933 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:22:28.936 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:22:28.938 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:22:28.939 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:22:28.941 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:22:28.943 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:22:28.945 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:22:28.946 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:22:28.948 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.code, p.is_delete, p.name
FROM auth.permissions AS p
WHERE p.id = @__p_0
2024-08-05 12:22:28.997 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p8='?' (DbType = Int64), @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?', @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime), @p7='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE auth.tokens SET access_token = @p0, created_at = @p1, expire_refresh_token = @p2, is_delete = @p3, refresh_token = @p4, type = @p5, updated_at = @p6, user_id = @p7
WHERE id = @p8;
2024-08-05 12:22:29.007 +05:00 [INF] Executed action method AuthApi.Controllers.AuthController.RefreshToken (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 123.159ms.
2024-08-05 12:22:29.011 +05:00 [INF] Executing ObjectResult, writing value of type 'WebCore.Models.ResponseModel'.
2024-08-05 12:22:29.017 +05:00 [INF] Executed action AuthApi.Controllers.AuthController.RefreshToken (AuthApi) in 144.0121ms
2024-08-05 12:22:29.018 +05:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.RefreshToken (AuthApi)'
2024-08-05 12:22:29.018 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:3001/api/auth/refreshtoken - 200 null application/json; charset=utf-8 152.2736ms
2024-08-05 12:23:49.154 +05:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:3001/api/auth/logout - application/json 539
2024-08-05 12:23:49.157 +05:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.LogOut (AuthApi)'
2024-08-05 12:23:49.160 +05:00 [INF] Route matched with {action = "LogOut", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[WebCore.Models.ResponseModel] LogOut(Entity.DataTransferObjects.Authentication.TokenDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2024-08-05 12:23:49.163 +05:00 [INF] Executing action method AuthApi.Controllers.AuthController.LogOut (AuthApi) - Validation state: "Valid"
2024-08-05 12:23:49.166 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__deleted_0='?' (DbType = Boolean), @__tokenDto_accessToken_1='?', @__tokenDto_refreshToken_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.created_at, t.expire_refresh_token, t.is_delete, t.refresh_token, t.type, t.updated_at, t.user_id
FROM auth.tokens AS t
WHERE t.is_delete = @__deleted_0 AND t.access_token = @__tokenDto_accessToken_1 AND t.refresh_token = @__tokenDto_refreshToken_2
LIMIT 1
2024-08-05 12:23:49.167 +05:00 [INF] Executed action AuthApi.Controllers.AuthController.LogOut (AuthApi) in 6.79ms
2024-08-05 12:23:49.168 +05:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.LogOut (AuthApi)'
2024-08-05 12:23:49.169 +05:00 [ERR] Exception: Not Found Token
Entity.Exeptions.NotFoundException: Not Found Token
   at AuthService.Services.AuthService.DeleteTokenAsync(TokenDto tokenDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthService\Services\AuthService.cs:line 116
   at AuthApi.Controllers.AuthController.LogOut(TokenDto tokenDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi\Controllers\AuthController.cs:line 24
   at lambda_method385(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at WebCore.Middlewares.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Middlewares\GlobalExceptionHandlerMiddleware.cs:line 15
2024-08-05 12:23:49.173 +05:00 [FTL] Exception: 
Entity.Exeptions.NotFoundException: Not Found Token
   at AuthService.Services.AuthService.DeleteTokenAsync(TokenDto tokenDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthService\Services\AuthService.cs:line 116
   at AuthApi.Controllers.AuthController.LogOut(TokenDto tokenDto) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\AuthApi\Controllers\AuthController.cs:line 24
   at lambda_method385(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at WebCore.Middlewares.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\z_zayniddinov\RiderProjects\MyWordsBack\WebCore\Middlewares\GlobalExceptionHandlerMiddleware.cs:line 15
2024-08-05 12:23:49.653 +05:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:3001/api/auth/logout - 404 null application/json; charset=utf-8 499.0147ms
2024-08-05 12:24:08.267 +05:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:3001/api/auth/logout - application/json 539
2024-08-05 12:24:08.269 +05:00 [INF] Executing endpoint 'AuthApi.Controllers.AuthController.LogOut (AuthApi)'
2024-08-05 12:24:08.271 +05:00 [INF] Route matched with {action = "LogOut", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[WebCore.Models.ResponseModel] LogOut(Entity.DataTransferObjects.Authentication.TokenDto) on controller AuthApi.Controllers.AuthController (AuthApi).
2024-08-05 12:24:08.272 +05:00 [INF] Executing action method AuthApi.Controllers.AuthController.LogOut (AuthApi) - Validation state: "Valid"
2024-08-05 12:24:08.273 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__deleted_0='?' (DbType = Boolean), @__tokenDto_accessToken_1='?', @__tokenDto_refreshToken_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.access_token, t.created_at, t.expire_refresh_token, t.is_delete, t.refresh_token, t.type, t.updated_at, t.user_id
FROM auth.tokens AS t
WHERE t.is_delete = @__deleted_0 AND t.access_token = @__tokenDto_accessToken_1 AND t.refresh_token = @__tokenDto_refreshToken_2
LIMIT 1
2024-08-05 12:24:08.281 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int64), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE auth.tokens SET is_delete = @p0
WHERE id = @p1;
2024-08-05 12:24:08.283 +05:00 [INF] Executed action method AuthApi.Controllers.AuthController.LogOut (AuthApi), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 10.074ms.
2024-08-05 12:24:08.284 +05:00 [INF] Executing ObjectResult, writing value of type 'WebCore.Models.ResponseModel'.
2024-08-05 12:24:08.285 +05:00 [INF] Executed action AuthApi.Controllers.AuthController.LogOut (AuthApi) in 13.2351ms
2024-08-05 12:24:08.285 +05:00 [INF] Executed endpoint 'AuthApi.Controllers.AuthController.LogOut (AuthApi)'
2024-08-05 12:24:08.286 +05:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:3001/api/auth/logout - 200 null application/json; charset=utf-8 19.0557ms
2024-08-05 12:49:27.326 +05:00 [INF] Application is shutting down...
